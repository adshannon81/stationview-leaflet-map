<!DOCTYPE html>
<html>

<head>
    <title>CRS.Simple example - Leaflet</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>

    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        #map {
            width: 800px;
            height: 600px;
        }
    </style>


</head>

<body>

    <div id='map'></div>

    <script>

        var map = L.map('map', {
            crs: L.CRS.Simple,
            minZoom: -2,
            maxZoom: 0,
            maxBounds: [
                [0, 0],
                [2506, 3579]
            ],
            maxBoundsViscosity: 1.0
        });

        d3.csv("data/Polygon details.csv")
            .then(data => {
                console.log('data', data);

                buildPolygons({
                    x: 3579, //width
                    y: 2506, //height
                    polygonsData: data,
                    imageUrl: 'img/Station-View-map-SD-interactivev2.png'
                })

            })


        function buildPolygons({ x, y, polygonsData, imageUrl }) {

            const polygons = [];

            var yx = L.latLng;
            var xy = function (x, y) {
                if (L.Util.isArray(x)) {    // When doing xy([x, y]);
                    return yx(x[1], x[0]);
                }
                return yx(y, x);  // When doing xy(x, y);
            };

            var bounds = [xy(0, 0), xy(x, y)];
            var image = L.imageOverlay(imageUrl, bounds).addTo(map);
            map.setView(xy(x / 2, y / 2), -2);

            //add map on click event display lat lon console
            map.on('click', function (e) {
                console.log(e.latlng);
            });



        }



    </script>



</body>

</html>